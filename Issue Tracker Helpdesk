<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
  const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSItc43UUq-pbnwE3NemKnaHcGt9XLVQm5GiZmucVDh-ndQ8Rs2UonaRccJpnWdnV0KwV_vZKhxjc6i/pub?gid=0&single=true&output=csv";

  let dataArticles = [];

  function renderArticles(keyword = "") {
    const list = document.getElementById('list');
    list.innerHTML = "";

    const filtered = dataArticles.filter(item =>
      item.Judul.toLowerCase().includes(keyword.toLowerCase())
    );

    if (filtered.length === 0) {
      list.innerHTML = "<p>Tidak ada artikel ditemukan.</p>";
      return;
    }

    filtered.forEach((item, index) => {
      const articleHTML = `
        <div class="article">
          <h3 onclick="toggleIsi(${index})" style="cursor:pointer;">
            ${item.Judul}
          </h3>
          <p id="isi-${index}" style="display:none;">
            ${item.Isi}
          </p>
        </div>
      `;
      list.innerHTML += articleHTML;
    });
  }

  function toggleIsi(index) {
    const isi = document.getElementById("isi-" + index);
    isi.style.display = isi.style.display === "none" ? "block" : "none";
  }

  function loadData() {
    Papa.parse(url, {
      download: true,
      header: true,
      skipEmptyLines: true,
      complete: function(results) {
        dataArticles = results.data;
        renderArticles();
      },
      error: function(err) {
        console.error("Gagal load CSV:", err);
        document.getElementById('list').innerHTML =
          "<p>Gagal memuat data.</p>";
      }
    });
  }

  document.getElementById('search').addEventListener('keyup', (e) => {
    renderArticles(e.target.value);
  });

  loadData();
</script>
